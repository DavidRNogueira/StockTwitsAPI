{"ast":null,"code":"import _regeneratorRuntime from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{SelectSymbolsDiv,SymbolInput,AddSymbolBtn,SymbolTagsDiv,TagDiv,SymbolName,TagsHeader,InputDiv,FormError,TweetCounterHeader,TweetCounterList,TweetCounterItem,TweetCounterDiv}from\"./SelectSymbolsStyles\";import axios from\"axios\";import{Context}from\"../../App\";var SelectSymbols=function SelectSymbols(){var context=useContext(Context);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentSymbol=_useState2[0],setCurrentSymbol=_useState2[1];var _useState3=useState([\"ASDF\"]),_useState4=_slicedToArray(_useState3,2),allSymbols=_useState4[0],setAllSymbols=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),compErrors=_useState6[0],setCompErrors=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweets=_useState8[0],setTweets=_useState8[1];var _useState9=useState([{symbol:\"ASDF\",mentions:2}]),_useState10=_slicedToArray(_useState9,2),tweetCounter=_useState10[0],setTweetCounter=_useState10[1];var handleInputChange=function handleInputChange(event){var newValue=event.currentTarget.value.toUpperCase();if(newValue.length>5){return;}setCurrentSymbol(newValue);};var handleDeleteTag=function handleDeleteTag(deletedSymbol){var newSymbols=allSymbols.filter(function(symbol){return symbol!==deletedSymbol;});setAllSymbols(newSymbols);var newTweets=tweets.filter(function(tweet){return tweet.symbol!==deletedSymbol;});context.dispatch({type:\"UPDATE_TWEETS\",payload:_toConsumableArray(newTweets)});setTweets(_toConsumableArray(newTweets));var newTweetCounter=tweetCounter.filter(function(counter){return counter.symbol!==deletedSymbol;});setTweetCounter([newTweetCounter]);};var handleAddNewSymbol=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,newTweets;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCompErrors([]);if(!allSymbols.includes(currentSymbol)){_context.next=4;break;}setCompErrors([].concat(_toConsumableArray(compErrors),[\"repeat\"]));return _context.abrupt(\"return\");case 4:if(!(currentSymbol.length>2&&currentSymbol.length<6)){_context.next=10;break;}setAllSymbols([].concat(_toConsumableArray(allSymbols),[currentSymbol]));_context.next=8;return axios.get(\"/get-tweets-by-symbol?symbol=\".concat(currentSymbol));case 8:response=_context.sent;if(response.status===200){newTweets=[].concat(_toConsumableArray(tweets),_toConsumableArray(response.data));context.dispatch({type:\"UPDATE_TWEETS\",payload:newTweets});setTweets(_toConsumableArray(newTweets));setTweetCounter([].concat(_toConsumableArray(tweetCounter),[{symbol:currentSymbol,mentions:response.data.length}]));}case 10:setCurrentSymbol(\"\");case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleAddNewSymbol(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(SelectSymbolsDiv,null,allSymbols.length>0&&/*#__PURE__*/React.createElement(TagsHeader,null,\"Tags You Have Selected:\"),/*#__PURE__*/React.createElement(SymbolTagsDiv,null,allSymbols.length>0&&allSymbols.map(function(symbol){return/*#__PURE__*/React.createElement(TagDiv,{href:\"\",onClick:function onClick(event){event.preventDefault();handleDeleteTag(symbol);}},/*#__PURE__*/React.createElement(SymbolName,null,symbol));})),/*#__PURE__*/React.createElement(InputDiv,null,/*#__PURE__*/React.createElement(SymbolInput,{type:\"text\",value:currentSymbol,onChange:function onChange(event){handleInputChange(event);}}),/*#__PURE__*/React.createElement(AddSymbolBtn,{href:\"\",onClick:function onClick(event){event.preventDefault();handleAddNewSymbol();}},\"Add Symbol\")),compErrors.includes(\"repeat\")&&/*#__PURE__*/React.createElement(FormError,null,\"You already added that symbol.\"),/*#__PURE__*/React.createElement(TweetCounterDiv,null,/*#__PURE__*/React.createElement(TweetCounterHeader,null,\"Mentions\"),/*#__PURE__*/React.createElement(TweetCounterList,null,tweetCounter&&tweetCounter.map(function(counter){return/*#__PURE__*/React.createElement(TweetCounterItem,null,counter.symbol,\" : \",counter.mentions,\" / 10\");}))),\"}\");};export default SelectSymbols;","map":{"version":3,"sources":["/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/src/Components/SelectSymbols/SelectSymbols.tsx"],"names":["React","useState","useContext","SelectSymbolsDiv","SymbolInput","AddSymbolBtn","SymbolTagsDiv","TagDiv","SymbolName","TagsHeader","InputDiv","FormError","TweetCounterHeader","TweetCounterList","TweetCounterItem","TweetCounterDiv","axios","Context","SelectSymbols","context","currentSymbol","setCurrentSymbol","allSymbols","setAllSymbols","compErrors","setCompErrors","tweets","setTweets","symbol","mentions","tweetCounter","setTweetCounter","handleInputChange","event","newValue","currentTarget","value","toUpperCase","length","handleDeleteTag","deletedSymbol","newSymbols","filter","newTweets","tweet","dispatch","type","payload","newTweetCounter","counter","handleAddNewSymbol","includes","get","response","status","data","map","preventDefault"],"mappings":"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","sourcesContent":["import React , {FC, useState, useContext} from \"react\";\nimport { \n    SelectSymbolsDiv,\n    SymbolInput, \n    AddSymbolBtn, \n    SymbolTagsDiv, \n    TagDiv, \n    SymbolName, \n    TagsHeader, \n    InputDiv, \n    FormError, \n    TweetCounterHeader,\n    TweetCounterList,\n    TweetCounterItem,\n    TweetCounterDiv\n} from \"./SelectSymbolsStyles\";\nimport axios from \"axios\"\nimport { Context } from \"../../App\";\nimport { ITweet, ITweetCounter } from \"../../interfaces\";\n\nconst SelectSymbols:FC = ():JSX.Element => {\n\t\tconst context = useContext(Context);\n\n    const [currentSymbol , setCurrentSymbol] = useState<string>(\"\");\n    const [allSymbols , setAllSymbols] = useState<string[]>([\"ASDF\"]);\n    const [compErrors , setCompErrors] = useState<string[]>([]);\n\tconst [tweets , setTweets] = useState<ITweet[]>([]);\n\tconst [tweetCounter , setTweetCounter] = useState<ITweetCounter[]>([{symbol: \"ASDF\" , mentions:2}]);\n   \n    const handleInputChange = (event: React.FormEvent<HTMLInputElement>) => {\n            const newValue = event.currentTarget.value.toUpperCase();\n\n            if (newValue.length > 5){\n                return;\n            }\n\n            setCurrentSymbol(newValue);\n\n    }\n\n    const handleDeleteTag = (deletedSymbol: string) => {\n        const newSymbols = allSymbols.filter(symbol => symbol !== deletedSymbol)\n\t\t\t\tsetAllSymbols(newSymbols);\n\n\t\tconst newTweets = tweets.filter(tweet => tweet.symbol !== deletedSymbol);\n\t\t\tcontext.dispatch({\n\t\t\t\ttype: \"UPDATE_TWEETS\" ,\n\t\t\t\tpayload : [...newTweets]\n\t\t\t})\n        setTweets([...newTweets])\n                \n        const newTweetCounter = tweetCounter.filter(counter => counter.symbol !== deletedSymbol);\n        setTweetCounter([newTweetCounter]);\n    }\n\n    const handleAddNewSymbol = async () => {\n        setCompErrors([]);\n        if (allSymbols.includes(currentSymbol)){\n            setCompErrors([...compErrors , \"repeat\"])\n            return;\n        }\n        if (currentSymbol.length > 2 && currentSymbol.length < 6){\n            setAllSymbols([...allSymbols , currentSymbol ])\n            const response = await axios.get(`/get-tweets-by-symbol?symbol=${currentSymbol}`)\n              if (response.status === 200){\n\t\t\t\tconst newTweets = [...tweets , ...response.data];\n\t\t\t\tcontext.dispatch({\n\t\t\t\t    type: \"UPDATE_TWEETS\" , \n\t\t\t\t    payload : newTweets\n\t\t\t\t})\n                setTweets([...newTweets]);\n                setTweetCounter([...tweetCounter , {symbol : currentSymbol , mentions : response.data.length}])\n              }\n        }\n        setCurrentSymbol(\"\")\n    }\n\n    return (\n        <SelectSymbolsDiv>\n            {\n                allSymbols.length > 0 && <TagsHeader>Tags You Have Selected:</TagsHeader>\n            }\n            <SymbolTagsDiv>\n                {\n                    allSymbols.length > 0 &&\n                    allSymbols.map(symbol =>{\n                        return(\n                            <TagDiv href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleDeleteTag(symbol);}}>\n                                <SymbolName>{symbol}</SymbolName>\n                            </TagDiv>\n                        )\n                    })\n                }\n            </SymbolTagsDiv>\n            <InputDiv>\n                <SymbolInput type =\"text\" value={currentSymbol} onChange={(event:React.FormEvent<HTMLInputElement>) => {handleInputChange(event)}}/>\n                <AddSymbolBtn href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleAddNewSymbol();}}>\n                    Add Symbol\n                </AddSymbolBtn>\n            </InputDiv>\n            {\n                compErrors.includes(\"repeat\") && <FormError>You already added that symbol.</FormError>\n            }\n\n            <TweetCounterDiv>\n                <TweetCounterHeader>Mentions</TweetCounterHeader>\n                <TweetCounterList>\n                    {\n                        tweetCounter &&\n                        tweetCounter.map(counter => {\n                            return <TweetCounterItem>{counter.symbol} : {counter.mentions} / 10</TweetCounterItem>\n                        })\n                    }\n                </TweetCounterList>\n            </TweetCounterDiv>\n            }\n        </SelectSymbolsDiv>\n    )\n}\n\nexport default SelectSymbols;"]},"metadata":{},"sourceType":"module"}