{"ast":null,"code":"import _regeneratorRuntime from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{SelectSymbolsDiv,SymbolInput,AddSymbolBtn,SymbolTagsDiv,TagDiv,SymbolName,TagsHeader,InputDiv,FormError,TweetCounterHeader,TweetCounterList,TweetCounterItem,TweetCounterDiv}from\"./SelectSymbolsStyles\";import axios from\"axios\";import{Context}from\"../../App\";var SelectSymbols=function SelectSymbols(){var context=useContext(Context);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentSymbol=_useState2[0],setCurrentSymbol=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allSymbols=_useState4[0],setAllSymbols=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),compErrors=_useState6[0],setCompErrors=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweets=_useState8[0],setTweets=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tweetCounter=_useState10[0],setTweetCounter=_useState10[1];var handleInputChange=function handleInputChange(event){var newValue=event.currentTarget.value.toUpperCase();if(newValue.length>5){return;}setCurrentSymbol(newValue);};var handleDeleteTag=function handleDeleteTag(deletedSymbol){console.log(context.state);var newSymbols=allSymbols.filter(function(symbol){return symbol!==deletedSymbol;});setAllSymbols(newSymbols);var newTweets=tweets.filter(function(tweet){return tweet.symbol!==deletedSymbol;});context.dispatch({type:\"UPDATE_TWEETS\",payload:_toConsumableArray(newTweets)});setTweets(_toConsumableArray(newTweets));var newTweetCounter=tweetCounter.filter(function(counter){return counter.symbol!==deletedSymbol;});setTweetCounter(newTweetCounter);};var handleAddNewSymbol=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,newTweets;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCompErrors([]);if(!allSymbols.includes(currentSymbol)){_context.next=4;break;}setCompErrors([].concat(_toConsumableArray(compErrors),[\"repeat\"]));return _context.abrupt(\"return\");case 4:if(!(currentSymbol.length>2&&currentSymbol.length<6)){_context.next=15;break;}_context.prev=5;_context.next=8;return axios.get(\"/get-tweets-by-symbol?symbol=\".concat(currentSymbol));case 8:response=_context.sent;if(response.status===200){newTweets=[].concat(_toConsumableArray(tweets),_toConsumableArray(response.data.messages));context.dispatch({type:\"UPDATE_TWEETS\",payload:newTweets});setTweets(newTweets);setTweetCounter([].concat(_toConsumableArray(tweetCounter),[{symbol:currentSymbol,mentions:response.data.messages.length}]));setAllSymbols([].concat(_toConsumableArray(allSymbols),[currentSymbol]));}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);setCompErrors([].concat(_toConsumableArray(compErrors),[\"not200\"]));case 15:setCurrentSymbol(\"\");case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function handleAddNewSymbol(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(SelectSymbolsDiv,null,/*#__PURE__*/React.createElement(InputDiv,null,/*#__PURE__*/React.createElement(SymbolInput,{type:\"text\",value:currentSymbol,onChange:function onChange(event){handleInputChange(event);}}),/*#__PURE__*/React.createElement(AddSymbolBtn,{href:\"\",onClick:function onClick(event){event.preventDefault();handleAddNewSymbol();}},\"Add Symbol\")),compErrors.includes(\"repeat\")&&/*#__PURE__*/React.createElement(FormError,null,\"You already added that symbol.\"),compErrors.includes(\"not200\")&&/*#__PURE__*/React.createElement(FormError,null,\"Ops! Something went wrong. Try again.\"),allSymbols.length>0&&/*#__PURE__*/React.createElement(TagsHeader,null,\"Tags You Have Selected:\"),/*#__PURE__*/React.createElement(SymbolTagsDiv,null,allSymbols.length>0&&allSymbols.map(function(symbol){var counter=tweetCounter.find(function(count){return count.symbol===symbol;});return/*#__PURE__*/React.createElement(TagDiv,{href:\"\",onClick:function onClick(event){event.preventDefault();handleDeleteTag(symbol);}},/*#__PURE__*/React.createElement(SymbolName,null,symbol,\" \",counter.mentions,\" / 10\"));})),tweetCounter.length>0&&/*#__PURE__*/React.createElement(TweetCounterDiv,null,/*#__PURE__*/React.createElement(TweetCounterHeader,null,\"Mentions\"),/*#__PURE__*/React.createElement(TweetCounterList,null,tweetCounter!==[]&&tweetCounter.map(function(counter){return/*#__PURE__*/React.createElement(TweetCounterItem,null,counter.symbol,\" : \",counter.mentions,\" / 10\");}))));};export default SelectSymbols;","map":{"version":3,"sources":["/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/src/Components/SelectSymbols/SelectSymbols.tsx"],"names":["React","useState","useContext","SelectSymbolsDiv","SymbolInput","AddSymbolBtn","SymbolTagsDiv","TagDiv","SymbolName","TagsHeader","InputDiv","FormError","TweetCounterHeader","TweetCounterList","TweetCounterItem","TweetCounterDiv","axios","Context","SelectSymbols","context","currentSymbol","setCurrentSymbol","allSymbols","setAllSymbols","compErrors","setCompErrors","tweets","setTweets","tweetCounter","setTweetCounter","handleInputChange","event","newValue","currentTarget","value","toUpperCase","length","handleDeleteTag","deletedSymbol","console","log","state","newSymbols","filter","symbol","newTweets","tweet","dispatch","type","payload","newTweetCounter","counter","handleAddNewSymbol","includes","get","response","status","data","messages","mentions","preventDefault","map","find","count"],"mappings":"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","sourcesContent":["import React , {FC, useState, useContext} from \"react\";\nimport { \n    SelectSymbolsDiv,\n    SymbolInput, \n    AddSymbolBtn, \n    SymbolTagsDiv, \n    TagDiv, \n    SymbolName, \n    TagsHeader, \n    InputDiv, \n    FormError, \n    TweetCounterHeader,\n    TweetCounterList,\n    TweetCounterItem,\n    TweetCounterDiv\n} from \"./SelectSymbolsStyles\";\nimport axios from \"axios\"\nimport { Context } from \"../../App\";\nimport { ITweet, ITweetCounter } from \"../../interfaces\";\n\nconst SelectSymbols:FC = ():JSX.Element => {\n\tconst context = useContext(Context);\n  const [currentSymbol , setCurrentSymbol] = useState<string>(\"\");\n  const [allSymbols , setAllSymbols] = useState<string[]>([]);\n  const [compErrors , setCompErrors] = useState<string[]>([]);\n\tconst [tweets , setTweets] = useState<ITweet[]>([]);\n\tconst [tweetCounter , setTweetCounter] = useState<ITweetCounter[]>([]);\n   \n    const handleInputChange = (event: React.FormEvent<HTMLInputElement>) => {\n            const newValue = event.currentTarget.value.toUpperCase();\n            if (newValue.length > 5){\n                return;\n            }\n            setCurrentSymbol(newValue);\n    }\n\n    const handleDeleteTag = (deletedSymbol: string) => {\n        console.log(context.state)\n        const newSymbols = allSymbols.filter(symbol => symbol !== deletedSymbol)\n\t\tsetAllSymbols(newSymbols);\n\n\t\tconst newTweets = tweets.filter(tweet => tweet.symbol !== deletedSymbol);\n\t\t\tcontext.dispatch({\n\t\t\t\ttype: \"UPDATE_TWEETS\" ,\n\t\t\t\tpayload : [...newTweets]\n\t\t\t})\n        setTweets([...newTweets])\n                \n        const newTweetCounter = tweetCounter.filter(counter => counter.symbol !== deletedSymbol);\n        setTweetCounter(newTweetCounter);\n    }\n\n    const handleAddNewSymbol = async () => {\n        setCompErrors([]);\n        if (allSymbols.includes(currentSymbol)){\n            setCompErrors([...compErrors , \"repeat\"])\n            return;\n        }\n        if (currentSymbol.length > 2 && currentSymbol.length < 6){\n            try{\n\t\t\t\t\t\t\tconst response = await axios.get(`/get-tweets-by-symbol?symbol=${currentSymbol}`)\n            \tif (response.status === 200){\n\t\t\t\t\t\t\t\tconst newTweets = [...tweets , ...response.data.messages];\n\t\t\t\t\t\t\t\tcontext.dispatch({\n\t\t\t\t\t\t\t\ttype: \"UPDATE_TWEETS\" , \n\t\t\t\t\t\t\t\tpayload : newTweets\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tsetTweets(newTweets);\n\t\t\t\t\t\t\t\t\t\tsetTweetCounter([...tweetCounter , {symbol : currentSymbol , mentions : response.data.messages.length}])\n\t\t\t\t\t\t\t\t\t\tsetAllSymbols([...allSymbols , currentSymbol ])\n\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\t\t\tsetCompErrors([...compErrors , \"not200\"])\n\t\t\t\t\t\t\t}\n        }\n        setCurrentSymbol(\"\")\n    }\n\n    return (\n        <SelectSymbolsDiv>\n            <InputDiv>\n                <SymbolInput type =\"text\" value={currentSymbol} onChange={(event:React.FormEvent<HTMLInputElement>) => {handleInputChange(event)}}/>\n                <AddSymbolBtn href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleAddNewSymbol();}}>\n                    Add Symbol\n                </AddSymbolBtn>\n            </InputDiv>\n            {\n                compErrors.includes(\"repeat\") && <FormError>You already added that symbol.</FormError>\n            }\n            {\n                compErrors.includes(\"not200\") && <FormError>Ops! Something went wrong. Try again.</FormError>\n            }\n\t\t\t\t\t\t {\n                allSymbols.length > 0 && <TagsHeader>Tags You Have Selected:</TagsHeader>\n            }\n            <SymbolTagsDiv>\n                {\n                    allSymbols.length > 0 &&\n                    allSymbols.map(symbol =>{\n\t\t\t\t\t\t\t\t\t\t\tconst counter = tweetCounter.find(count => count.symbol === symbol)\n                        return(\n                            <TagDiv href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleDeleteTag(symbol);}}>\n                                <SymbolName>{symbol} {counter.mentions} / 10</SymbolName>\n                            </TagDiv>\n                        )\n                    })\n                }\n            </SymbolTagsDiv>\n            {\n                tweetCounter.length > 0 &&\n                <TweetCounterDiv>\n                    <TweetCounterHeader>Mentions</TweetCounterHeader>\n                    <TweetCounterList>\n                        {\n                            tweetCounter !== [] &&\n                            tweetCounter.map(counter => {\n                                return <TweetCounterItem>{counter.symbol} : {counter.mentions} / 10</TweetCounterItem>\n                            })\n                        }\n                    </TweetCounterList>\n                </TweetCounterDiv>\n            }\n        </SelectSymbolsDiv>\n    )\n}\n\nexport default SelectSymbols;"]},"metadata":{},"sourceType":"module"}