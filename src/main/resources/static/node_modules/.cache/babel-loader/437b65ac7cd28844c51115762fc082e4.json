{"ast":null,"code":"import _regeneratorRuntime from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{SelectSymbolsDiv,SymbolInput,AddSymbolBtn,SymbolTagsDiv,TagDiv,SymbolName,TagsHeader,InputDiv,FormError}from\"./SelectSymbolsStyles\";import axios from\"axios\";import{Context}from\"../../App\";var SelectSymbols=function SelectSymbols(){var context=useContext(Context);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentSymbol=_useState2[0],setCurrentSymbol=_useState2[1];var _useState3=useState([\"ASDF\"]),_useState4=_slicedToArray(_useState3,2),allSymbols=_useState4[0],setAllSymbols=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),compErrors=_useState6[0],setCompErrors=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweets=_useState8[0],setTweets=_useState8[1];var handleInputChange=function handleInputChange(event){var newValue=event.currentTarget.value.toUpperCase();if(newValue.length>5){return;}setCurrentSymbol(newValue);};var handleDeleteTag=function handleDeleteTag(deletedSymbol){var newArray=allSymbols.filter(function(symbol){return symbol!==deletedSymbol;});setAllSymbols(newArray);};var handleAddNewSymbol=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCompErrors([]);if(!allSymbols.includes(currentSymbol)){_context.next=4;break;}setCompErrors([].concat(_toConsumableArray(compErrors),[\"repeat\"]));return _context.abrupt(\"return\");case 4:if(!(currentSymbol.length>2&&currentSymbol.length<6)){_context.next=10;break;}setAllSymbols([].concat(_toConsumableArray(allSymbols),[currentSymbol]));_context.next=8;return axios.get(\"/get-tweets-by-symbol?symbol=\".concat(currentSymbol));case 8:response=_context.sent;if(response.status===200){setTweets([].concat(_toConsumableArray(tweets),[response.data]));context.dispatch({action:\"UPDATE_TWEETS\",payload:tweets});console.log(context.state);}case 10:setCurrentSymbol(\"\");case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleAddNewSymbol(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(SelectSymbolsDiv,null,allSymbols.length>0&&/*#__PURE__*/React.createElement(TagsHeader,null,\"Tags You Have Selected:\"),/*#__PURE__*/React.createElement(SymbolTagsDiv,null,allSymbols.length>0&&allSymbols.map(function(symbol){return/*#__PURE__*/React.createElement(TagDiv,{href:\"\",onClick:function onClick(event){event.preventDefault();handleDeleteTag(symbol);}},/*#__PURE__*/React.createElement(SymbolName,null,symbol));})),/*#__PURE__*/React.createElement(InputDiv,null,/*#__PURE__*/React.createElement(SymbolInput,{type:\"text\",value:currentSymbol,onChange:function onChange(event){handleInputChange(event);}}),/*#__PURE__*/React.createElement(AddSymbolBtn,{href:\"\",onClick:function onClick(event){event.preventDefault();handleAddNewSymbol();}},\"Add Symbol\")),compErrors.includes(\"repeat\")&&/*#__PURE__*/React.createElement(FormError,null,\"You already added that symbol.\"));};export default SelectSymbols;","map":{"version":3,"sources":["/Users/davidnogueira/Desktop/StockTwitsChallenge /src/main/resources/static/src/Components/SelectSymbols/SelectSymbols.tsx"],"names":["React","useState","useContext","SelectSymbolsDiv","SymbolInput","AddSymbolBtn","SymbolTagsDiv","TagDiv","SymbolName","TagsHeader","InputDiv","FormError","axios","Context","SelectSymbols","context","currentSymbol","setCurrentSymbol","allSymbols","setAllSymbols","compErrors","setCompErrors","tweets","setTweets","handleInputChange","event","newValue","currentTarget","value","toUpperCase","length","handleDeleteTag","deletedSymbol","newArray","filter","symbol","handleAddNewSymbol","includes","get","response","status","data","dispatch","action","payload","console","log","state","map","preventDefault"],"mappings":"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","sourcesContent":["import React , {FC, useState, useContext} from \"react\";\nimport { \n    SelectSymbolsDiv,\n    SymbolInput, \n    AddSymbolBtn, \n    SymbolTagsDiv, \n    TagDiv, \n    SymbolName, \n    TagsHeader, \n    InputDiv, \n    FormError \n} from \"./SelectSymbolsStyles\";\nimport axios from \"axios\"\nimport { Context } from \"../../App\";\n\nconst SelectSymbols:FC = ():JSX.Element => {\n\t\tconst context = useContext(Context);\n\n    const [currentSymbol , setCurrentSymbol] = useState<string>(\"\");\n    const [allSymbols , setAllSymbols] = useState<string[]>([\"ASDF\"]);\n    const [compErrors , setCompErrors] = useState<string[]>([]);\n    const [tweets , setTweets] = useState<string[]>([]);\n   \n    const handleInputChange = (event: React.FormEvent<HTMLInputElement>) => {\n            const newValue = event.currentTarget.value.toUpperCase();\n\n            if (newValue.length > 5){\n                return;\n            }\n\n            setCurrentSymbol(newValue);\n\n    }\n\n    const handleDeleteTag = (deletedSymbol: string) => {\n        const newArray = allSymbols.filter(symbol => symbol !== deletedSymbol)\n        setAllSymbols(newArray);\n    }\n\n    const handleAddNewSymbol = async () => {\n        setCompErrors([]);\n        if (allSymbols.includes(currentSymbol)){\n            setCompErrors([...compErrors , \"repeat\"])\n            return;\n        }\n        if (currentSymbol.length > 2 && currentSymbol.length < 6){\n            setAllSymbols([...allSymbols , currentSymbol ])\n            const response = await axios.get(`/get-tweets-by-symbol?symbol=${currentSymbol}`)\n                if (response.status === 200){\n\t\t\t\t\t\t\t\t\tsetTweets([...tweets , response.data]);\n\t\t\t\t\t\t\t\t\tcontext.dispatch({\n\t\t\t\t\t\t\t\t\t\taction: \"UPDATE_TWEETS\" , \n\t\t\t\t\t\t\t\t\t\tpayload : tweets\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\tconsole.log(context.state);\n                }\n        }\n        setCurrentSymbol(\"\")\n    }\n\n    return (\n        <SelectSymbolsDiv>\n            {\n                allSymbols.length > 0 && <TagsHeader>Tags You Have Selected:</TagsHeader>\n            }\n            <SymbolTagsDiv>\n                {\n                    allSymbols.length > 0 &&\n                    allSymbols.map(symbol =>{\n                        return(\n                            <TagDiv href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleDeleteTag(symbol);}}>\n                                <SymbolName>{symbol}</SymbolName>\n                            </TagDiv>\n                        )\n                    })\n                }\n            </SymbolTagsDiv>\n            <InputDiv>\n                <SymbolInput type =\"text\" value={currentSymbol} onChange={(event:React.FormEvent<HTMLInputElement>) => {handleInputChange(event)}}/>\n                <AddSymbolBtn href=\"\" onClick={(event:React.MouseEvent<HTMLAnchorElement>) => {event.preventDefault(); handleAddNewSymbol();}}>\n                    Add Symbol\n                </AddSymbolBtn>\n            </InputDiv>\n            {\n                compErrors.includes(\"repeat\") && <FormError>You already added that symbol.</FormError>\n            }\n        </SelectSymbolsDiv>\n    )\n}\n\nexport default SelectSymbols;"]},"metadata":{},"sourceType":"module"}